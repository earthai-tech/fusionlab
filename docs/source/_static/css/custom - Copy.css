/* custom.css for fusionlab documentation with Furo theme */

/*--------------------------------------------------------------------------
 * Variables and Color Palette (FusionLab Theme v3 - Blue/Orange)
 *--------------------------------------------------------------------------*/

:root,
html[data-theme="light"] {
    /* --- Brand Colors (FusionLab) --- */
    --fusionlab-primary: #2E3191;        /* Deep Blue/Purple */
    --fusionlab-secondary: #F28620;      /* Orange */
    /* Derived Shades */
    --fusionlab-primary-light: #787BC4;  /* Lighter blue */
    --fusionlab-primary-dark: #242774;   /* Darker blue */
    --fusionlab-secondary-light: #F8A953; /* Lighter orange */
    --fusionlab-secondary-dark: #D97706;  /* Darker orange */
    /* Background Tints */
    --fusionlab-primary-bg-tint-light: rgba(46, 49, 145, 0.07);
    --fusionlab-secondary-bg-tint-light: rgba(242, 134, 32, 0.09); /* Increased tint */
    --fusionlab-primary-bg-tint-dark: rgba(120, 123, 196, 0.12);
    --fusionlab-secondary-bg-tint-dark: rgba(248, 169, 83, 0.12);
    /* Link Hover */
    --fusionlab-link-hover-light: var(--fusionlab-secondary); /* Use Orange for hover text */
    --fusionlab-link-hover-dark: var(--fusionlab-secondary-light); /* Lighter Orange for hover text */

    /* --- Furo Variable Overrides (Light Mode) --- */
    /* Brand */
    --color-brand-primary: var(--fusionlab-primary);
    --color-brand-content: var(--fusionlab-primary); /* Links use primary */

    /* Base */
    --color-foreground-primary: #212529;
    --color-foreground-secondary: #495057;
    --color-foreground-muted: #6c757d;
    --color-background-primary: #ffffff;
    --color-background-secondary: #f8f9fa;
    --color-background-hover: #eff1f3;
    --color-border: #dee2e6;

    /* Code Blocks */
    --color-code-background: #f8f9fa;
    --color-code-border: var(--color-border);
    --color-code-foreground: #343a40;

    /* Sidebar */
    --color-sidebar-background: var(--color-background-secondary);
    /* Sidebar hover bg uses Secondary Orange tint */
    --color-sidebar-background-hover: var(--fusionlab-secondary-bg-tint-light);
    --color-sidebar-link-text: var(--color-foreground-secondary);
    --color-sidebar-link-text--top-level: var(--fusionlab-primary-dark);

    /* Admonitions */
    --color-admonition-background: var(--color-background-secondary);
    /* Note, Info, SeeAlso, Tip, Hint use Primary Blue */
    --color-admonition-note-border: var(--fusionlab-primary);
    --color-admonition-note-background: var(--fusionlab-primary-bg-tint-light);
    --color-admonition-info-border: var(--fusionlab-primary);
    --color-admonition-info-background: var(--fusionlab-primary-bg-tint-light);
    --color-admonition-tip-border: var(--fusionlab-primary);
    --color-admonition-tip-background: var(--fusionlab-primary-bg-tint-light);
    --color-admonition-hint-border: var(--fusionlab-primary);
    --color-admonition-hint-background: var(--fusionlab-primary-bg-tint-light);
    /* Warning, Caution, Important, Error, Danger use Secondary Orange */
    --color-admonition-warning-border: var(--fusionlab-secondary);
    --color-admonition-warning-background: var(--fusionlab-secondary-bg-tint-light);
    --color-admonition-caution-border: var(--fusionlab-secondary);
    --color-admonition-caution-background: var(--fusionlab-secondary-bg-tint-light);
    --color-admonition-important-border: var(--fusionlab-secondary);
    --color-admonition-important-background: var(--fusionlab-secondary-bg-tint-light);
    --color-admonition-error-border: var(--fusionlab-secondary-dark); /* Darker orange */
    --color-admonition-error-background: var(--fusionlab-secondary-bg-tint-light);
    --color-admonition-danger-border: var(--fusionlab-secondary-dark);
    --color-admonition-danger-background: var(--fusionlab-secondary-bg-tint-light);
}

html[data-theme="dark"] {
    /* --- Furo Variable Overrides (Dark Mode) --- */
    /* Brand */
    --color-brand-primary: var(--fusionlab-primary-light);
    --color-brand-content: var(--fusionlab-primary-light);

    /* Base */
    --color-foreground-primary: #e9ecef;
    --color-foreground-secondary: #ced4da;
    --color-foreground-muted: #adb5bd;
    --color-background-primary: #212529;
    --color-background-secondary: #2c3034;
    --color-background-hover: #343a40;
    --color-border: #495057;

    /* Code Blocks */
    --color-code-background: #2c3034;
    --color-code-border: var(--color-border);
    --color-code-foreground: #ced4da;

    /* Sidebar */
    --color-sidebar-background: #1f2326;
    /* Sidebar hover bg uses Secondary Orange tint */
    --color-sidebar-background-hover: var(--fusionlab-secondary-bg-tint-dark);
    --color-sidebar-link-text: #adb5bd;
    --color-sidebar-link-text--top-level: var(--fusionlab-primary-light);

    /* Admonitions */
    --color-admonition-background: var(--color-background-secondary);
    /* Note, Info, SeeAlso, Tip, Hint use Primary Blue */
    --color-admonition-note-border: var(--fusionlab-primary-light);
    --color-admonition-note-background: var(--fusionlab-primary-bg-tint-dark);
    --color-admonition-info-border: var(--fusionlab-primary-light);
    --color-admonition-info-background: var(--fusionlab-primary-bg-tint-dark);
    --color-admonition-tip-border: var(--fusionlab-primary-light);
    --color-admonition-tip-background: var(--fusionlab-primary-bg-tint-dark);
    --color-admonition-hint-border: var(--fusionlab-primary-light);
    --color-admonition-hint-background: var(--fusionlab-primary-bg-tint-dark);
    /* Warning, Caution, Important, Error, Danger use Secondary Orange */
    --color-admonition-warning-border: var(--fusionlab-secondary-light);
    --color-admonition-warning-background: var(--fusionlab-secondary-bg-tint-dark);
    --color-admonition-caution-border: var(--fusionlab-secondary-light);
    --color-admonition-caution-background: var(--fusionlab-secondary-bg-tint-dark);
    --color-admonition-important-border: var(--fusionlab-secondary-light);
    --color-admonition-important-background: var(--fusionlab-secondary-bg-tint-dark);
    --color-admonition-error-border: var(--fusionlab-secondary); /* Base orange */
    --color-admonition-error-background: var(--fusionlab-secondary-bg-tint-dark);
    --color-admonition-danger-border: var(--fusionlab-secondary);
    --color-admonition-danger-background: var(--fusionlab-secondary-bg-tint-dark);
}

/*--------------------------------------------------------------------------
 * General Typography & Layout
 *--------------------------------------------------------------------------*/
body {
    line-height: 1.7;
    font-size: 16px;
    font-family: system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,
                 sans-serif,Apple Color Emoji,Segoe UI Emoji;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}
.main-grid {
    max-width: 980px;
}

/* Headings (Requirement 5: Use Secondary Orange for H1) */
h1, .heading-title {
    font-size: 2.6rem;
    margin-bottom: 1.5rem;
    padding-bottom: 0.6rem;
    border-bottom: 3px solid var(--fusionlab-secondary); /* Orange underline */
    color: var(--fusionlab-secondary-dark); /* Darker Orange text */
    font-weight: 700;
    letter-spacing: -0.5px;
}
html[data-theme="dark"] h1,
html[data-theme="dark"] .heading-title {
    border-bottom-color: var(--fusionlab-secondary); /* Orange underline */
    color: var(--fusionlab-secondary-light); /* Lighter Orange text */
}

h2 {
    font-size: 1.9rem;
    margin-top: 3.5rem;
    margin-bottom: 1.4rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid var(--color-border);
    /* Use Primary Blue for H2 */
    color: var(--color-brand-primary);
    font-weight: 600;
}
html[data-theme="dark"] h2 {
     color: var(--color-brand-primary); /* Lighter Blue */
}


h3 {
    font-size: 1.5rem;
    margin-top: 3rem;
    margin-bottom: 1.2rem;
    color: var(--color-foreground-primary);
    font-weight: 600;
}

h4 {
    font-size: 1.2rem;
    font-weight: 600;
    color: var(--color-foreground-secondary);
    letter-spacing: 0.2px;
    margin-top: 2rem;
}

/* Links (Requirement 2: Hover uses Secondary Orange) */
a,
a:visited {
    color: var(--color-brand-content); /* Primary blue */
    text-decoration: none;
    border-bottom: 1px solid transparent; /* Start transparent */
    position: relative;
    transition: color 0.2s ease-out;
}
/* Animated underline effect using secondary color */
a::after {
    content: '';
    position: absolute;
    width: 0;
    height: 1px;
    display: block;
    margin-top: 2px; /* Adjust position relative to text */
    right: 0;
    background: var(--fusionlab-secondary); /* Orange underline */
    transition: width 0.3s ease;
    -webkit-transition: width 0.3s ease;
}
a:hover,
a:focus {
    color: var(--fusionlab-link-hover-light); /* Orange text on hover */
    border-bottom-color: transparent; /* Hide static border on hover */
}
a:hover::after {
    width: 100%;
    left: 0;
    background-color: var(--fusionlab-secondary); /* Orange underline grow */
}
html[data-theme="dark"] a:hover,
html[data-theme="dark"] a:focus {
    color: var(--fusionlab-link-hover-dark); /* Lighter Orange text on hover */
}
html[data-theme="dark"] a::after {
     background: var(--fusionlab-secondary-light); /* Lighter Orange underline */
}
html[data-theme="dark"] a:hover::after {
    background-color: var(--fusionlab-secondary-light);
}

/* Inline code links (Requirement 3: Dotted Orange Underline) */
code a, code a:visited {
    color: inherit; /* Inherit code color */
    text-decoration: none !important; /* Override browser default */
    border-bottom: 1px dotted var(--fusionlab-secondary);
    padding-bottom: 1px; /* Add tiny space below text */
    transition: border-bottom-style 0.2s ease-out,
                color 0.2s ease-out;
}
code a::after {
     content: none !important; /* Remove animated underline */
}
code a:hover, code a:focus {
     border-bottom-style: solid; /* Solid underline on hover */
     color: var(--fusionlab-secondary-dark); /* Optional: Darker orange text hover */
     background-color: transparent !important; /* Ensure no background from link */
}
html[data-theme="dark"] code a:hover,
html[data-theme="dark"] code a:focus {
     color: var(--fusionlab-secondary-light);
     border-bottom-color: var(--fusionlab-secondary-light);
}


/*--------------------------------------------------------------------------
 * Code Blocks & Inline Code (Requirement 4: Hover frame on PRE)
 *--------------------------------------------------------------------------*/
pre, :not(pre) > code {
    font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo,
                 Courier, monospace;
    border-radius: 5px;
    border: 1px solid var(--color-code-border);
    background-color: var(--color-code-background);
}
pre {
    padding: 1em 1.2em;
    margin: 1.7em 0;
    font-size: 0.92em;
    box-shadow: 0 2px 4px rgba(0,0,0,0.04);
    line-height: 1.6;
    /* Add transition for border color */
    transition: border-color 0.2s ease-in-out;
}
:not(pre) > code {
    padding: 0.2em 0.45em;
    font-size: 0.9em;
    white-space: nowrap;
}
/* Add hover effect for pre blocks */
pre:hover {
    border-color: var(--fusionlab-primary); /* Primary Blue frame on hover */
}
html[data-theme="dark"] pre:hover {
     border-color: var(--fusionlab-primary-light); /* Lighter Blue frame */
}

/* Code copy button styling */
button.copybtn { /* Keep previous button style */ }
button.copybtn:hover { /* Keep previous button style */ }
html[data-theme="dark"] button.copybtn { /* Keep previous button style */ }
html[data-theme="dark"] button.copybtn:hover { /* Keep previous button style */ }


/*--------------------------------------------------------------------------
 * Tables (FusionLab Style with Alternating Blue Rows)
 *--------------------------------------------------------------------------*/
table.docutils,
table.dataframe {
    width: 100%;
    border-collapse: collapse;
    margin-top: 1.5em;
    margin-bottom: 1.5em;
    border: 1px solid var(--color-border);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
    font-size: 0.9em;
    border-radius: 6px; /* Keep rounded corners */
    overflow: hidden; /* Keep clipping */
}

table.docutils th,
table.dataframe th {
    /* Keep header style */
    background-color: var(--color-background-secondary);
    border: 1px solid var(--color-border);
    border-bottom-width: 2px;
    padding: 10px 14px;
    text-align: left;
    font-weight: 600;
    color: var(--color-foreground-primary);
}
html[data-theme="dark"] table.docutils th,
html[data-theme="dark"] table.dataframe th {
     background-color: #2c3034; /* Keep dark header */
     border-color: var(--color-border);
}

table.docutils td,
table.dataframe td {
    /* Keep default cell border and padding */
    border: 1px solid var(--color-border);
    padding: 10px 14px;
    vertical-align: top;
    line-height: 1.5;
}

/* --- Alternating Row Colors --- */
/* Remove previous even-row striping */
table.docutils tbody tr:nth-child(even),
table.dataframe tbody tr:nth-child(even) {
    background-color: transparent; /* No specific background for even rows */
}
/* Apply blue tint background to ODD rows */
table.docutils tbody tr:nth-child(odd),
table.dataframe tbody tr:nth-child(odd) {
    background-color: var(--fusionlab-primary-bg-tint-light); /* Light blue tint */
}
html[data-theme="dark"] table.docutils tbody tr:nth-child(odd),
html[data-theme="dark"] table.dataframe tbody tr:nth-child(odd) {
    background-color: var(--fusionlab-primary-bg-tint-dark); /* Dark blue tint */
}

/* Keep Hover effect (Optional - hover overrides striping) */
table.docutils tbody tr:hover,
table.dataframe tbody tr:hover {
    /* Could use a slightly stronger blue tint on hover, or keep as is */
    background-color: color-mix(in srgb, var(--fusionlab-primary) 15%, transparent);
}
html[data-theme="dark"] table.docutils tbody tr:hover,
html[data-theme="dark"] table.dataframe tbody tr:hover {
    background-color: color-mix(in srgb, var(--fusionlab-primary-light) 20%, transparent);
}

/*--------------------------------------------------------------------------
 * Admonitions - Colored by Type (FusionLab Palette)
 *--------------------------------------------------------------------------*/
.admonition {
    border-radius: 6px;
    padding: 1.2em 1.5em;
    margin: 2em 0;
    border-left-width: 6px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    background-color: var(--color-background-secondary);
}
.admonition p:last-child { margin-bottom: 0; }
.admonition .admonition-title {
    font-weight: 700;
    margin-bottom: 0.6em;
    display: block;
    font-size: 1.05em;
}
/* Note / Info / See Also / Tip / Hint (Primary Blue) */
.admonition.note, .admonition.seealso, .admonition.info,
.admonition.tip, .admonition.hint {
    border-left-color: var(--fusionlab-primary);
    background-color: var(--fusionlab-primary-bg-tint-light);
}
html[data-theme="dark"] .admonition.note,
html[data-theme="dark"] .admonition.seealso,
html[data-theme="dark"] .admonition.info,
html[data-theme="dark"] .admonition.tip,
html[data-theme="dark"] .admonition.hint {
     background-color: var(--fusionlab-primary-bg-tint-dark);
     border-left-color: var(--fusionlab-primary-light);
}
.admonition.note .admonition-title, .admonition.seealso .admonition-title,
.admonition.info .admonition-title, .admonition.tip .admonition-title,
.admonition.hint .admonition-title {
    color: var(--fusionlab-primary-dark); /* Darker blue */
}
html[data-theme="dark"] .admonition.note .admonition-title,
html[data-theme="dark"] .admonition.seealso .admonition-title,
html[data-theme="dark"] .admonition.info .admonition-title,
html[data-theme="dark"] .admonition.tip .admonition-title,
html[data-theme="dark"] .admonition.hint .admonition-title {
    color: var(--fusionlab-primary-light); /* Lighter blue */
}
/* Warning / Caution / Important / Error / Danger (Secondary Orange) */
.admonition.warning, .admonition.caution, .admonition.important,
.admonition.error, .admonition.danger {
    border-left-color: var(--fusionlab-secondary);
    background-color: var(--fusionlab-secondary-bg-tint-light);
}
html[data-theme="dark"] .admonition.warning,
html[data-theme="dark"] .admonition.caution,
html[data-theme="dark"] .admonition.important,
html[data-theme="dark"] .admonition.error,
html[data-theme="dark"] .admonition.danger {
     background-color: var(--fusionlab-secondary-bg-tint-dark);
     border-left-color: var(--fusionlab-secondary-light);
}
.admonition.warning .admonition-title, .admonition.caution .admonition-title,
.admonition.important .admonition-title, .admonition.error .admonition-title,
.admonition.danger .admonition-title {
    color: var(--fusionlab-secondary-dark); /* Darker Orange */
}
html[data-theme="dark"] .admonition.warning .admonition-title,
html[data-theme="dark"] .admonition.caution .admonition-title,
html[data-theme="dark"] .admonition.important .admonition-title,
html[data-theme="dark"] .admonition.error .admonition-title,
html[data-theme="dark"] .admonition.danger .admonition-title {
     color: var(--fusionlab-secondary-light); /* Lighter orange */
}


/*--------------------------------------------------------------------------
 * Sidebar Customization (Requirement 1: Hover BG is Secondary Orange)
 *--------------------------------------------------------------------------*/
.sidebar-drawer {
    /* width: 18rem; */
    border-right: 1px solid var(--color-border);
}
.toc-drawer > .toc-tree {
    padding-inline-start: 1.2rem;
}
.sidebar-drawer .reference {
    transition: background-color 0.15s ease-in-out,
                color 0.15s ease-in-out,
                padding-left 0.15s ease-in-out,
                border-left 0.15s ease-in-out;
    padding: 0.35em 0.8em;
    border-radius: 4px;
    margin: 1px 0;
    display: block;
    border-left: 3px solid transparent;
}
.sidebar-drawer .reference:hover {
    background-color: var(--fusionlab-secondary-bg-tint-light); /* Orange Tint */
    color: var(--fusionlab-secondary-dark) !important; /* Dark Orange Text */
    border-left-color: var(--fusionlab-secondary); /* Orange accent */
}
html[data-theme="dark"] .sidebar-drawer .reference:hover {
    background-color: var(--fusionlab-secondary-bg-tint-dark); /* Dark Orange Tint */
    color: var(--fusionlab-secondary-light) !important; /* Light Orange Text */
    border-left-color: var(--fusionlab-secondary-light); /* Light Orange accent */
}
/* Keep current link using primary blue for contrast */
.sidebar-drawer li.current > a.reference {
    background-color: var(--fusionlab-primary-bg-tint-light);
    color: var(--fusionlab-primary) !important;
    font-weight: 600;
    border-left-color: var(--fusionlab-primary);
}
html[data-theme="dark"] .sidebar-drawer li.current > a.reference {
    background-color: var(--fusionlab-primary-bg-tint-dark);
    color: var(--fusionlab-primary-light) !important;
    border-left-color: var(--fusionlab-primary-light);
}

/*--------------------------------------------------------------------------
 * Index Page Specific Styles (If using CSS Buttons)
 *--------------------------------------------------------------------------*/
.button-container { /* Keep previous styles */ }
.button-container a.button-link-primary,
.button-container a.button-link-secondary { /* Keep previous styles */ }
.button-container a.button-link-primary::after,
.button-container a.button-link-secondary::after { /* Keep previous styles */ }
.button-container a.button-link-primary:hover,
.button_container a.button-link-secondary:hover { /* Keep previous styles */ }
/* Primary Button (Blue Solid) */
.button-container a.button-link-primary { /* Keep previous styles */ }
.button-container a.button-link-primary:hover { /* Keep previous styles */ }
/* Secondary Button (Orange Outline/Solid Hover) */
.button-container a.button-link-secondary { /* Keep previous styles */ }
.button-container a.button-link-secondary:hover { /* Keep previous styles */ }
html[data-theme="dark"] .button-container a.button-link-secondary { /* Keep previous styles */ }
html[data-theme="dark"] .button-container a.button-link-secondary:hover { /* Keep previous styles */ }

/* Topic box styling */
.topic { /* Keep previous styles */ }
.topic p.topic-title { /* Keep previous styles */ }
html[data-theme="dark"] .topic { /* Keep previous styles */ }
html[data-theme="dark"] .topic p.topic-title { /* Keep previous styles */ }

/* Other small tweaks */
hr { /* Keep previous styles */ }